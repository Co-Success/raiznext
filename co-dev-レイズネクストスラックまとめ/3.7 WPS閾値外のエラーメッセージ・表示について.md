![:画鋲:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-medium/1f4cc.png)WPS閾値外のエラーメッセージ・表示について

22 件の返信

---

![](https://ca.slack-edge.com/T7L88TM38-U07P5SJBM71-dcf6cb51635d-48)

三方 浩成（SolG）三方 浩成（SolG）  [3月7日 11:23](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741314223047929?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[@坂田 穣 Design](https://sensyn-robotics.slack.com/team/U01RTGBKSR5) [@高橋 萌 (PlantEng/Designer)](https://sensyn-robotics.slack.com/team/U07PL3ZPVKK) [@和田 剛 (plant dev)](https://sensyn-robotics.slack.com/team/U07D1SN9CJ1) [@takagishi](https://sensyn-robotics.slack.com/team/U04U8BR54TH) [@中山 一哉（SR）](https://sensyn-robotics.slack.com/team/U07PWRT53FF) [@倉谷伸宏](https://sensyn-robotics.slack.com/team/U07LW7F5ABA) [@河口 真貴子](https://sensyn-robotics.slack.com/team/U031FRESR55)  
先ほどの会話内容

- エラーメッセージ（Web／Native）
    - `保存した「 棒径,銘柄,最大電流 」のいずれかが WPS の既定値と異なります。次工程に進めません。　・継手番号Xを確認してください` とする
    - 「いずれか」と入れて、全てのエラーパターンについて、上記メッセージで統一
- エラー表示（Web）
    - 棒径、銘柄、最大電流の順番で1つずつ赤字強調
        - 例）棒径、銘柄がエラーの場合は、最初に棒径だけが赤字強調されており、正値で入力保存後、銘柄が赤字強調される

※WPS値の参照ロジック的に、「全項目が異なる」という判定ができないため（棒径と銘柄の値をキーにして、最大電流値を参照しているため）[@和田 剛 (plant dev)](https://sensyn-robotics.slack.com/team/U07D1SN9CJ1) [@takagishi](https://sensyn-robotics.slack.com/team/U04U8BR54TH)  
2点確認させてください。  
①１つの継手について、初層溶接と2層目以上溶接の両方で棒径が間違っていた場合、それぞれの棒径で赤字強調されるで理解合っていますか？  
（赤字強調は1つの項目のみだが、溶接工程ごとで赤字強調可能でしょうか）②継手番号については1つのメッセージボックスに複数表示可能で合っていますか？  
例）継手番号1,2,3がエラーの時、下記の表に表示可能かどうか  
`保存した「 棒径,銘柄,最大電流 」のいずれかが WPS の既定値と異なります。次工程に進めません。　・継手番号1,2,3を確認してください`

![:両目:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-small/1f440.png)2![:arigatougozaima:](https://emoji.slack-edge.com/T7L88TM38/arigatougozaima/9aeab1d64822f24f.png)3

![](https://ca.slack-edge.com/T7L88TM38-U07D1SN9CJ1-57617275cd14-48)

和田 剛 (plant dev)和田 剛 (plant dev)  [3月7日 11:45](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741315542142829?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[このチケットの件](https://sensyn-robotics.atlassian.net/browse/WD-746)

**[WD-746 溶接結果がWPS通りでなければ強調表示できる](https://sensyn-robotics.atlassian.net/browse/WD-746?atlOrigin=eyJpIjoiZjlkOTE1NDEzYzg4NDlmMmJmNWJjZGNiZTcwZmY4MTgiLCJwIjoiamlyYS1zbGFjay1pbnQifQ)**

Status: **TODO**

Type: **タスク**

Assignee: **Takashi Wada**

Priority: **Medium**

Assign

Change status

Comment

投稿したメンバー: [Jira Cloud](https://sensyn-robotics.slack.com/services/B01E57FFHGU "Jira Cloud")

![](https://ca.slack-edge.com/T7L88TM38-U031FRESR55-997870642417-48)

河口 真貴子河口 真貴子  [3月7日 11:47](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741315675441469?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

cc [@ShiftAsia-Bill](https://sensyn-robotics.slack.com/team/U07UHC1AL3E) [@ShiftAsia_Ciel](https://sensyn-robotics.slack.com/team/U085X857DNK)

![:+1:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-small/1f44d.png)2

![](https://ca.slack-edge.com/T7L88TM38-U07D1SN9CJ1-57617275cd14-48)

和田 剛 (plant dev)和田 剛 (plant dev)  [3月7日 11:47](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741315675796889?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

> ①１つの継手について、初層溶接と2層目以上溶接の両方で棒径が間違っていた場合、それぞれの棒径で赤字強調されるで理解合っていますか？

はい、そのような挙動を想定していて、十分実装難易度が低いと思っています。

![:+1:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-small/1f44d.png)1![:arigatougozaima:](https://emoji.slack-edge.com/T7L88TM38/arigatougozaima/9aeab1d64822f24f.png)1

[11:49](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741315785730219?thread_ts=1741313070.151049&cid=C06MR75MQKY)

> ②継手番号については1つのメッセージボックスに複数表示可能で合っていますか？

はい、たとえば継手1は棒径が見つからない、継手2は銘柄が見つからない、継手3は仕様は特定できるが電流が違うというシナリオでもそのように表示する想定です。 （編集済み） 

![:+1:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-small/1f44d.png)2![:arigatougozaima:](https://emoji.slack-edge.com/T7L88TM38/arigatougozaima/9aeab1d64822f24f.png)1

[11:53](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741315986994979?thread_ts=1741313070.151049&cid=C06MR75MQKY)

[@三方 浩成（SolG）](https://sensyn-robotics.slack.com/team/U07P5SJBM71) [@坂田 穣 Design](https://sensyn-robotics.slack.com/team/U01RTGBKSR5) [@高橋 萌 (PlantEng/Designer)](https://sensyn-robotics.slack.com/team/U07PL3ZPVKK)  
あと今明示的に議論できていないのは欠番と古い溶接試行に異常な入力のある場合ですね。  
多分ユーザー的にはこれらはメッセージから除外してほしいかと思いますが、合ってますか?

![:+1:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-small/1f44d.png)1

![](https://ca.slack-edge.com/T7L88TM38-U07P5SJBM71-dcf6cb51635d-48)

三方 浩成（SolG）三方 浩成（SolG）  [3月7日 12:00](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741316408791129?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[@和田 剛 (plant dev)](https://sensyn-robotics.slack.com/team/U07D1SN9CJ1)  
そうですね！  
欠番と古い溶接施行の分は除外して欲しいです！  
（基本的に入力ミスでない限りは、WPS閾値外登録した分は溶接ミスになり、再溶接になるかなと思っています）

![:+1:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-small/1f44d.png)2

![](https://ca.slack-edge.com/T7L88TM38-U07D1SN9CJ1-57617275cd14-48)

和田 剛 (plant dev)和田 剛 (plant dev)  [3月7日 12:09](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741316957374379?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[@takagishi](https://sensyn-robotics.slack.com/team/U04U8BR54TH) [@中山 一哉（SR）](https://sensyn-robotics.slack.com/team/U07PWRT53FF) [@黄 志謙 (Sariel)](https://sensyn-robotics.slack.com/team/U03MGNRB9MK)  
WPSとWeldResultの齟齬のメッセージ表示について企画・デザインと議論しました(別途会議ホストする予定でしたが、坂田さんが捕まりそうになかったので、10:30の会議で相談してしまいました)。この内容のメッセージなら、先日議論した[discrepancies API](https://sensyn-robotics.atlassian.net/browse/WD-745)で実現可能かと思います。  
欠番と古い溶接試行を除外するのはviewの問題だから、APIは全部返して基本的にはクライアント側でフィルターかなと思ってますが意見あれば聞きたいです。  
他にも疑問とか指摘あればお願いします。

![:+1:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-small/1f44d.png)1![:arigato_2:](https://emoji.slack-edge.com/T09MVBNJ0/arigato_2/573e6b8661cd544e.png)1

![](https://ca.slack-edge.com/T09MVBNJ0-U04U8BR54TH-dbed6c5a86f8-48)

takagishitakagishi  [3月7日 12:33](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741318405401529?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[@和田 剛 (plant dev)](https://sensyn-robotics.slack.com/team/U07D1SN9CJ1) [@三方 浩成（SolG）](https://sensyn-robotics.slack.com/team/U07P5SJBM71)  
ありがとうございます！  

> APIは全部返して基本的にはクライアント側でフィルター

基本的にはこちらで問題ないと思います！

- 棒径、銘柄、最大電流の順番で1つずつ赤字強調

- 例）棒径、銘柄がエラーの場合は、最初に棒径だけが赤字強調されており、正値で入力保存後、銘柄が赤字強調される

ここつまりリアルタイムバリデーションですよね。  
意図した通りに修正されたら良いのですが、銘柄が先に変更されたりしたらどうしようか気になりました。その辺考慮すると、エラー表示とは別に銘柄とそれに対応する棒径や適用可能な電流範囲？の一覧情報をどこかで持つ必要がある気がしました。（そうするとそもそも入力時点でバリデーション入れるかどうかという話にもなるかもです）各項目の正しさは送信後に判定するものとして、  

- ①棒径、銘柄、最大電流すべてを赤字強調する
- ②棒径、銘柄、最大電流のいずれかの値が変更されたらフィールドのエラー自体は全て解除する

だとどうでしょうか？

[12:35](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741318518555149?thread_ts=1741313070.151049&cid=C06MR75MQKY)

もしかすると入力時点で棒径が選択されたら銘柄や電流が絞られるみたいな設計にしたら基本起こらないエラーだったりするんでしょうか![:考え中:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-medium/1f914.png)

スクリーンショット 2025-03-07 12.33.34.png 

[

![スクリーンショット 2025-03-07 12.33.34.png](https://files.slack.com/files-tmb/T09MVBNJ0-F08G5TX9JMV-216046f548/____________________________2025-03-07_12.33.34_720.png)

](https://files.slack.com/files-pri/T09MVBNJ0-F08G5TX9JMV/____________________________2025-03-07_12.33.34.png)

![](https://ca.slack-edge.com/T7L88TM38-U07D1SN9CJ1-57617275cd14-48)

和田 剛 (plant dev)和田 剛 (plant dev)  [3月7日 12:38](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741318735836749?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[@takagishi](https://sensyn-robotics.slack.com/team/U04U8BR54TH) [@三方 浩成（SolG）](https://sensyn-robotics.slack.com/team/U07P5SJBM71)  
赤字での強調表示は閲覧モードのものなので、保存後refresh時にdiscrepanciesも取るからそういう問題はないかと思ってましたが、違ってるでしょうか...

![:naruhodo:](https://emoji.slack-edge.com/T09MVBNJ0/naruhodo/0de3265e76e6db1e.png)1![:祈る:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-small/1f64f.png)1

[12:43](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741319011613839?thread_ts=1741313070.151049&cid=C06MR75MQKY)

バリデーションと言っているのは不整合の強調表示のことですよね?WPSと合わないデータも入力・保存は許容します(記録なので)。

![](https://ca.slack-edge.com/T09MVBNJ0-U04U8BR54TH-dbed6c5a86f8-48)

takagishitakagishi  [3月7日 12:50](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741319432431619?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[@和田 剛 (plant dev)](https://sensyn-robotics.slack.com/team/U07D1SN9CJ1)  

> 閲覧モードのものなので、保存後refresh時にdiscrepanciesも取るからそういう問題はない

たしかにそうですね！失礼しました![:おじぎ_男性:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-medium/1f647-200d-2642-fe0f.png)すみません、業務フロー理解できてなくて恐縮なのですが、棒径、銘柄、最大電流のいずれかが間違っている場合は、  
R-1, R-2みたいに継手が増えていく形でしたっけ？  
その際、R-1でエラーが出ている→R-2を追加したらR-1のエラーは表示しないみたいな想定でしたか。

![](https://ca.slack-edge.com/T7L88TM38-U07D1SN9CJ1-57617275cd14-48)

和田 剛 (plant dev)和田 剛 (plant dev)  [3月7日 12:58](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741319906226029?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

はい、間違えた溶接をしてしまったらユーザーが継手に対し手動で再溶接操作をします。  
これにより、同じ継手に新しいWeldAttempt(管理記録の一行のようなもの)ができ、工程を最初から登録してゆきます。 （編集済み） 

![:arigato_2:](https://emoji.slack-edge.com/T09MVBNJ0/arigato_2/573e6b8661cd544e.png)1

[13:01](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741320078617529?thread_ts=1741313070.151049&cid=C06MR75MQKY)

で、ご想定のシナリオでは、~~R2~~ R1については少なくともメッセージは不要です。  
[@三方 浩成（SolG）](https://sensyn-robotics.slack.com/team/U07P5SJBM71)  
テーブル上の文字色強調表示は不要でしょうか?  
行はグレーアウトなのでの赤染めはしないでしょうが。 （編集済み） 

![](https://ca.slack-edge.com/T09MVBNJ0-U04U8BR54TH-dbed6c5a86f8-48)

takagishitakagishi  [3月7日 13:08](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741320527050769?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

ありがとうございます、おそらく理解です！

![:祈る:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-medium/1f64f.png)![:祈る:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-medium/1f64f.png)![:祈る:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-medium/1f64f.png)

  

> R-1でエラーが出ている→R-2を追加したら

おそらくグレーアウトですかね。  
もしエラーがない状態で際溶接操作を行う想定などもあるようであれば少し話変わりそうとは思ったので念のため確認できたらと思います。

![](https://ca.slack-edge.com/T7L88TM38-U07P5SJBM71-dcf6cb51635d-48)

三方 浩成（SolG）三方 浩成（SolG）  [3月7日 13:09](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741320570055859?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

> テーブル上の文字色強調表示は不要でしょうか?

特に不要で良いと思います！

![:ok_男性:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-small/1f646-200d-2642-fe0f.png)1![:shouchishimashita:](https://emoji.slack-edge.com/T09MVBNJ0/shouchishimashita/2145cd4c1dc3ca50.png)1![:arigato_2:](https://emoji.slack-edge.com/T09MVBNJ0/arigato_2/573e6b8661cd544e.png)2

![](https://ca.slack-edge.com/T7L88TM38-U07D1SN9CJ1-57617275cd14-48)

和田 剛 (plant dev)和田 剛 (plant dev)  [3月7日 13:28](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741321721277229?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[@takagishi](https://sensyn-robotics.slack.com/team/U04U8BR54TH)  
エラーない状態での再溶接はありえます。WPS通りに溶接したけど割れちゃって外観検査通らないとか。

![:naruhodo:](https://emoji.slack-edge.com/T09MVBNJ0/naruhodo/0de3265e76e6db1e.png)1![:arigato_2:](https://emoji.slack-edge.com/T09MVBNJ0/arigato_2/573e6b8661cd544e.png)1

![](https://ca.slack-edge.com/T09MVBNJ0-U04U8BR54TH-dbed6c5a86f8-48)

takagishitakagishi  [3月7日 13:31](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741321888123609?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

どちらも場合もあり得るんですね。  

- エラーのある状態での再溶接
- エラーない状態での再溶接

→ここまでの会話で両者グレーアウトの認識です！（違ったらご指摘ください![:祈る:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-medium/1f64f.png)）

![:+1:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-small/1f44d.png)1![:naruhodo:](https://emoji.slack-edge.com/T7L88TM38/naruhodo/0a9968f4dcce9990.png)1

![](https://ca.slack-edge.com/T7L88TM38-U07PL3ZPVKK-7c43fed0bbe5-48)

高橋 萌 (PlantEng/Designer)高橋 萌 (PlantEng/Designer)  [3月7日 15:27](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741328822633819?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[@三方 浩成（SolG）](https://sensyn-robotics.slack.com/team/U07P5SJBM71)  
figma修正済みです！  
[ネイティブ](https://www.figma.com/design/K92P7fjMCF1Q17JrSMHn1q/%E6%BA%B6%E6%8E%A5%E6%96%BD%E5%B7%A5%E7%AE%A1%E7%90%86?node-id=7456-309929&t=KD1O5D1FDKlwfdBs-1)・[PC](https://www.figma.com/design/K92P7fjMCF1Q17JrSMHn1q/%E6%BA%B6%E6%8E%A5%E6%96%BD%E5%B7%A5%E7%AE%A1%E7%90%86?node-id=9546-224474&t=KD1O5D1FDKlwfdBs-1)

![:arigatougozaima:](https://emoji.slack-edge.com/T7L88TM38/arigatougozaima/9aeab1d64822f24f.png)1

![](https://ca.slack-edge.com/T7L88TM38-U07P5SJBM71-dcf6cb51635d-48)

三方 浩成（SolG）三方 浩成（SolG）  [3月7日 16:54](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741334073944639?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[@高橋 萌 (PlantEng/Designer)](https://sensyn-robotics.slack.com/team/U07PL3ZPVKK)  
PC版の方ですが、  
`保存した「`が消えちゃっているので、入れていただければ！ （編集済み） 

image.png 

[

![image.png](https://files.slack.com/files-tmb/T7L88TM38-F08GQPUMFCL-e37a915de1/image_360.png)

](https://files.slack.com/files-pri/T7L88TM38-F08GQPUMFCL/image.png)

[](https://files.slack.com/files-pri/T7L88TM38-F08GQPUMFCL/download/image.png?origin_team=T7L88TM38)

![](https://ca.slack-edge.com/T7L88TM38-U07PL3ZPVKK-7c43fed0bbe5-48)

高橋 萌 (PlantEng/Designer)高橋 萌 (PlantEng/Designer)  [3月7日 17:11](https://sensyn-robotics.slack.com/archives/C06MR75MQKY/p1741335095715389?thread_ts=1741313070.151049&cid=C06MR75MQKY)  

[@三方 浩成（SolG）](https://sensyn-robotics.slack.com/team/U07P5SJBM71)  
大変失礼しました！修正しました![:おじぎ_女性:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/apple-medium/1f647-200d-2640-fe0f.png)